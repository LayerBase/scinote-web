<%
  delimiters = defined_delimiters_options
  selected_delimiter = column.metadata['delimiter'] || 'return'
  selected_delimiter_char = Constants::REPOSITORY_LIST_ITEMS_DELIMITERS_MAP[selected_delimiter.to_sym]
%>

<%= hidden_field_tag 'dropdown-options', '[]', class: 'dropdown-options' %>
<div class="form-group">
  <label class="control-label col-sm-3" for="repository-column-data-type">
    <%= t('libraries.manange_modal_column.list_type.delimiter_label') %>
  </label>
  <div class="col-sm-9">
    <%= select_tag('delimiter', options_for_select(delimiters, selected_delimiter), class: 'form-control delimiter', disabled: !column.new_record?) %>
  </div>
</div>
<div class="form-group">
  <div class="control-label col-sm-3">
  <label for="repository-column-data-type"><%= t('libraries.manange_modal_column.list_type.dropdown_items_label') %></label>
  <div class="limit-counter-container">
    <span class="items-count" data-count="0">0</span>
    <span class="items-limit">
      <%= t('libraries.manange_modal_column.too_many_items_label', limit: Constants::REPOSITORY_LIST_ITEMS_PER_COLUMN) %>
    </span>
  </div>
</div>
  <div class="col-sm-9">
    <%= text_area_tag 'items-textarea', column.repository_list_items.pluck(:data).join(selected_delimiter_char), rows: 10, class: 'form-control items-textarea' %>
    <% unless column.new_record? %>
      <div class="bg-danger hidden changing-existing-list-items-warning">
        <%= t('libraries.manange_modal_column.change_multi_select_items_warning') %>
      </div>
    <% end %>
  </div>
</div>
<div class="dropdown-preview">
  <span class="field-name">Preview</span>
  <div class="preview-block">
    <div class="preview-label"><%= column.name %></div>
    <select class="form-control preview-select">
    </select>
  </div>
</div>
