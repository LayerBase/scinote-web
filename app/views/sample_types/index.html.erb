<% provide(:head_title, t('sample_types.index.head_title')) %>
<%= render partial: "shared/sidebar" %>
<%= render partial: "shared/secondary_navigation" %>

<% if current_organization %>
  <ul class="nav nav-tabs nav-settings" data-position="bottom">
    <li role="presentation" class="active">
      <%= link_to t('sample_types.index.sample_types'),
                  organization_sample_types_path(current_organization,
                    project_id: (@project.id if @project),
                    my_module_id: (@my_module.id if @my_module)) %>
    </li>
    <li role="presentation">
      <%= link_to t('sample_types.index.sample_groups'),
                  organization_sample_groups_path(current_organization,
                    project_id: (@project.id if @project),
                    my_module_id: (@my_module.id if @my_module)) %>
    </li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane tab-pane-settings tab-pane-protocols active" role="tabpanel">
      <div class="pull-right">
        <button id="create-resource"
               class="btn btn-primary pull-right"><%= t 'sample_types.index.new' %></button>
      </div>
      <ul class="list-unstyled sample_types_groups_list"
          id="sample_types_list">
        <li class="new-resource-form">
          <%= form_for SampleType.new,
                                 remote: true,
                                 html: { class: 'form-inline' },
                                 url: organization_sample_types_path(current_organization) do |f| %>
            <div class="form-group">
              <%= f.text_field :name, id: 'name-input', class: 'form-control' %>
              <span id="submit" class="glyphicon glyphicon-ok"></span>
            </div>
            <span class="pull-right">
              <span id="remove" class="glyphicon glyphicon-trash"></span>
            </span>
          <% end %>
        </li>
        <% @sample_types.sorted.each do |sample_type| %>
          <%= render partial: 'sample_type',
                              locals: { sample_type: sample_type,
                                        organization: current_organization } %>
        <% end %>
      </ul>
    </div>
  </div>
<% end %>

<%= javascript_include_tag 'samples/sample_types_groups' %>
