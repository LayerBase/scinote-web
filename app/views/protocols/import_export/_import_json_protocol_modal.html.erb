<div class="modal fade" id="modal-import-json-protocol" tabindex="-1" role="dialog" >
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><%= t('protocols.index.modal_import_json_title') %></h4>
        <%= t("protocols.index.modal_import_json_notice") %>
      </div>
                             <%= form_tag({ action: "protocolsio_import_create"}, id:"protocols_io_form", format: :json, multipart: true,remote: true,:method => "post") do %>

      <div class="modal-body">

           <%= file_field_tag 'json_file', accept: '.txt' %>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal"><%= t('general.cancel')%></button>
        <%= submit_tag t("protocols.index.modal_import_json_submit"), class: "btn btn-default" %>
      </div>
      <% end %>

    </div>
  </div>
</div>
<% if false %>
<script>
$(document).ready(function() {
    $('#protocols_io_form').submit(function() {
        $("#ajax").after(status);
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: $(this).serialize(),
            dataType: 'json',
            success: function(json) {
                if(json.type == 'success') {
                    $('#msg').css("color","green").html(json.message);
                } else if(json.type == 'warning'){
                    $('#msg').css("color","yellow").html(json.message);
                } else if(json.type == 'error'){
                    $('#msg').css("color","red").html(json.message);
                }
                $('.loading').remove();
            }
        })
        return false;
    });
});
</script>
<% end %>
